<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frozen City 3D</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f1b4d, #1a2a6c);
            color: #fff;
            min-height: 100vh;
            overflow: hidden;
        }
        
        .container {
            display: grid;
            grid-template-rows: auto 1fr auto;
            height: 100vh;
            padding: 10px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-bottom: 10px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }
        
        .resources {
            display: flex;
            gap: 15px;
        }
        
        .resource {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(0, 0, 0, 0.4);
            padding: 5px 10px;
            border-radius: 15px;
        }
        
        .resource-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        
        .food { background: #ff9800; }
        .wood { background: #8bc34a; }
        .stone { background: #9e9e9e; }
        .coal { background: #424242; }
        .gold { background: #ffd700; }
        
        .game-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 10px;
            height: 100%;
        }
        
        .city-3d {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        #gameCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .city-name {
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 20px;
            color: #bbdefb;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }
        
        .temperature {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(0, 0, 0, 0.4);
            padding: 5px 10px;
            border-radius: 15px;
        }
        
        .controls {
            position: absolute;
            bottom: 15px;
            left: 15px;
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            background: #2196f3;
            color: white;
            cursor: pointer;
            font-weight: bold;
        }
        
        .sidebar {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .section {
            background: rgba(30, 40, 90, 0.5);
            border-radius: 8px;
            padding: 12px;
        }
        
        .section-title {
            font-size: 16px;
            margin-bottom: 10px;
            color: #bbdefb;
        }
        
        .buildings-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }
        
        .building-card {
            background: rgba(50, 60, 120, 0.6);
            border-radius: 6px;
            padding: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .building-card:hover {
            background: rgba(70, 80, 150, 0.7);
            transform: scale(1.05);
        }
        
        .building-icon {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .building-name {
            font-size: 12px;
        }
        
        .building-level {
            font-size: 10px;
            color: #4fc3f7;
        }
        
        .workers-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .worker {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px;
            background: rgba(40, 50, 100, 0.6);
            border-radius: 6px;
        }
        
        .worker-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #2196f3;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .worker-info {
            flex: 1;
        }
        
        .worker-name {
            font-size: 12px;
        }
        
        .worker-assignment {
            font-size: 10px;
            color: #bbdefb;
        }
        
        .events-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .event {
            background: rgba(255, 152, 0, 0.2);
            padding: 8px;
            border-radius: 6px;
            border-left: 3px solid #ff9800;
        }
        
        .event-title {
            font-size: 12px;
            margin-bottom: 3px;
        }
        
        .event-description {
            font-size: 10px;
            color: #ffcc80;
        }
        
        .snow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }
        
        .snowflake {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">FROZEN CITY</div>
            <div class="resources">
                <div class="resource">
                    <div class="resource-icon food"></div>
                    <span id="food-count">150</span>
                </div>
                <div class="resource">
                    <div class="resource-icon wood"></div>
                    <span id="wood-count">80</span>
                </div>
                <div class="resource">
                    <div class="resource-icon stone"></div>
                    <span id="stone-count">45</span>
                </div>
                <div class="resource">
                    <div class="resource-icon coal"></div>
                    <span id="coal-count">30</span>
                </div>
                <div class="resource">
                    <div class="resource-icon gold"></div>
                    <span id="gold-count">10</span>
                </div>
            </div>
        </header>
        
        <div class="game-container">
            <div class="city-3d">
                <canvas id="gameCanvas"></canvas>
                <div class="snow" id="snow-container"></div>
                
                <div class="city-name">–õ–ï–î–Ø–ù–û–ô –ü–û–°–Å–õ–û–ö</div>
                
                <div class="temperature">
                    <div>‚ùÑÔ∏è</div>
                    <div>-25¬∞C</div>
                </div>
                
                <div class="controls">
                    <button class="btn" onclick="collectResources()">–°–æ–±—Ä–∞—Ç—å</button>
                    <button class="btn" onclick="explore()">–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å</button>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="section">
                    <div class="section-title">–ó–î–ê–ù–ò–Ø</div>
                    <div class="buildings-grid">
                        <div class="building-card" onclick="upgradeBuilding('hut')">
                            <div class="building-icon">üè†</div>
                            <div class="building-name">–•–∏–∂–∏–Ω–∞</div>
                            <div class="building-level">–£—Ä. 2</div>
                        </div>
                        <div class="building-card" onclick="upgradeBuilding('sawmill')">
                            <div class="building-icon">üå≤</div>
                            <div class="building-name">–õ–µ—Å–æ–ø–∏–ª–∫–∞</div>
                            <div class="building-level">–£—Ä. 1</div>
                        </div>
                        <div class="building-card" onclick="upgradeBuilding('quarry')">
                            <div class="building-icon">‚õ∞Ô∏è</div>
                            <div class="building-name">–ö–∞–º–µ–Ω–æ–ª–æ–º–Ω—è</div>
                            <div class="building-level">–£—Ä. 1</div>
                        </div>
                        <div class="building-card" onclick="upgradeBuilding('mine')">
                            <div class="building-icon">‚õèÔ∏è</div>
                            <div class="building-name">–®–∞—Ö—Ç–∞</div>
                            <div class="building-level">–£—Ä. 1</div>
                        </div>
                        <div class="building-card" onclick="upgradeBuilding('farm')">
                            <div class="building-icon">üåæ</div>
                            <div class="building-name">–§–µ—Ä–º–∞</div>
                            <div class="building-level">–£—Ä. 1</div>
                        </div>
                        <div class="building-card" onclick="upgradeBuilding('kitchen')">
                            <div class="building-icon">üç≤</div>
                            <div class="building-name">–ö—É—Ö–Ω—è</div>
                            <div class="building-level">–£—Ä. 1</div>
                        </div>
                    </div>
                </div>
                
                <div class="section">
                    <div class="section-title">–ñ–ò–¢–ï–õ–ò</div>
                    <div class="workers-list">
                        <div class="worker">
                            <div class="worker-avatar">üë®</div>
                            <div class="worker-info">
                                <div class="worker-name">–ê–ª–µ–∫—Å–µ–π</div>
                                <div class="worker-assignment">–õ–µ—Å–æ–ø–∏–ª–∫–∞</div>
                            </div>
                        </div>
                        <div class="worker">
                            <div class="worker-avatar">üë©</div>
                            <div class="worker-info">
                                <div class="worker-name">–ú–∞—Ä–∏—è</div>
                                <div class="worker-assignment">–ö–∞–º–µ–Ω–æ–ª–æ–º–Ω—è</div>
                            </div>
                        </div>
                        <div class="worker">
                            <div class="worker-avatar">üë®</div>
                            <div class="worker-info">
                                <div class="worker-name">–î–º–∏—Ç—Ä–∏–π</div>
                                <div class="worker-assignment">–§–µ—Ä–º–∞</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section">
                    <div class="section-title">–°–û–ë–´–¢–ò–Ø</div>
                    <div class="events-list">
                        <div class="event">
                            <div class="event-title">–ù–æ–≤—ã–π –∂–∏—Ç–µ–ª—å!</div>
                            <div class="event-description">–ö –≤–∞–º –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è –Ω–æ–≤—ã–π –≤—ã–∂–∏–≤—à–∏–π</div>
                        </div>
                        <div class="event">
                            <div class="event-title">–ú–æ—Ä–æ–∑ —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è</div>
                            <div class="event-description">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ–ø—É—Å–∫–∞–µ—Ç—Å—è –¥–æ -30¬∞C</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 3D –≥—Ä–∞—Ñ–∏–∫–∞ –≥–æ—Ä–æ–¥–∞
        function init3DCity() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ canvas
            function resizeCanvas() {
                canvas.width = canvas.parentElement.clientWidth;
                canvas.height = canvas.parentElement.clientHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // –î–∞–Ω–Ω—ã–µ –∑–¥–∞–Ω–∏–π
            const buildings = [
                { type: 'hut', x: 100, y: 300, width: 60, height: 50, level: 2, workers: 2 },
                { type: 'hut', x: 180, y: 320, width: 60, height: 50, level: 1, workers: 1 },
                { type: 'sawmill', x: 300, y: 280, width: 80, height: 60, level: 1, workers: 1 },
                { type: 'quarry', x: 400, y: 350, width: 70, height: 50, level: 1, workers: 1 },
                { type: 'farm', x: 250, y: 450, width: 90, height: 40, level: 1, workers: 1 },
                { type: 'mine', x: 500, y: 300, width: 60, height: 70, level: 1, workers: 0 }
            ];
            
            // –î–∞–Ω–Ω—ã–µ –∂–∏—Ç–µ–ª–µ–π
            const villagers = [
                { x: 120, y: 350, targetX: 120, targetY: 350, speed: 1, building: 'hut' },
                { x: 200, y: 370, targetX: 200, targetY: 370, speed: 1, building: 'hut' },
                { x: 320, y: 340, targetX: 320, y: 340, speed: 1, building: 'sawmill' },
                { x: 420, y: 400, targetX: 420, y: 400, speed: 1, building: 'quarry' },
                { x: 270, y: 490, targetX: 270, y: 490, speed: 1, building: 'farm' }
            ];
            
            // –§—É–Ω–∫—Ü–∏—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –∑–¥–∞–Ω–∏—è
            function drawBuilding(building) {
                ctx.fillStyle = getBuildingColor(building.type);
                ctx.fillRect(building.x, building.y, building.width, building.height);
                
                // –ö—Ä—ã—à–∞
                ctx.fillStyle = '#8B4513';
                ctx.beginPath();
                ctx.moveTo(building.x - 5, building.y);
                ctx.lineTo(building.x + building.width / 2, building.y - 20);
                ctx.lineTo(building.x + building.width + 5, building.y);
                ctx.closePath();
                ctx.fill();
                
                // –û–∫–Ω–∞
                ctx.fillStyle = '#FFD700';
                for (let i = 0; i < building.level; i++) {
                    ctx.fillRect(building.x + 15 + i * 15, building.y + 15, 8, 10);
                }
                
                // –£—Ä–æ–≤–µ–Ω—å –∑–¥–∞–Ω–∏—è
                ctx.fillStyle = 'white';
                ctx.font = '12px Arial';
                ctx.fillText(`–£—Ä. ${building.level}`, building.x + 5, building.y - 5);
            }
            
            // –§—É–Ω–∫—Ü–∏—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –∂–∏—Ç–µ–ª—è
            function drawVillager(villager) {
                ctx.fillStyle = '#3498db';
                ctx.beginPath();
                ctx.arc(villager.x, villager.y, 8, 0, Math.PI * 2);
                ctx.fill();
                
                // –ì–æ–ª–æ–≤–∞
                ctx.fillStyle = '#FFE0B2';
                ctx.beginPath();
                ctx.arc(villager.x, villager.y - 10, 6, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∑–¥–∞–Ω–∏—è
            function getBuildingColor(type) {
                const colors = {
                    hut: '#8B4513',
                    sawmill: '#2E8B57', 
                    quarry: '#696969',
                    mine: '#2F4F4F',
                    farm: '#DAA520',
                    kitchen: '#CD5C5C'
                };
                return colors[type] || '#666666';
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∂–∏—Ç–µ–ª–µ–π
            function moveVillagers() {
                villagers.forEach(villager => {
                    if (Math.abs(villager.x - villager.targetX) > 2 || 
                        Math.abs(villager.y - villager.targetY) > 2) {
                        villager.x += (villager.targetX - villager.x) * 0.05;
                        villager.y += (villager.targetY - villager.y) * 0.05;
                    } else {
                        // –°–ª—É—á–∞–π–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
                        if (Math.random() < 0.02) {
                            const building = buildings.find(b => b.type === villager.building);
                            if (building) {
                                villager.targetX = building.x + Math.random() * building.width;
                                villager.targetY = building.y + Math.random() * building.height;
                            }
                        }
                    }
                });
            }
            
            // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
            function gameLoop() {
                // –û—á–∏—Å—Ç–∫–∞ canvas
                ctx.fillStyle = '#1a2a6c';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // –†–∏—Å–æ–≤–∞–Ω–∏–µ –∑–µ–º–ª–∏
                ctx.fillStyle = '#2E8B57';
                ctx.fillRect(0, canvas.height - 150, canvas.width, 150);
                
                // –†–∏—Å–æ–≤–∞–Ω–∏–µ –∑–¥–∞–Ω–∏–π
                buildings.forEach(drawBuilding);
                
                // –î–≤–∏–∂–µ–Ω–∏–µ –∏ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ –∂–∏—Ç–µ–ª–µ–π
                moveVillagers();
                villagers.forEach(drawVillager);
                
                // –°–Ω–µ–≥ –Ω–∞ –∑–µ–º–ª–µ
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                for (let i = 0; i < 50; i++) {
                    const x = Math.random() * canvas.width;
                    const y = canvas.height - 150 + Math.random() * 150;
                    ctx.beginPath();
                    ctx.arc(x, y, 2, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                requestAnimationFrame(gameLoop);
            }
            
            gameLoop();
        }
        
        // –°–Ω–µ–≥–æ–ø–∞–¥
        function createSnow() {
            const snowContainer = document.getElementById('snow-container');
            const snowflakeCount = 80;
            
            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                
                const size = Math.random() * 4 + 1;
                snowflake.style.width = `${size}px`;
                snowflake.style.height = `${size}px`;
                
                snowflake.style.left = `${Math.random() * 100}%`;
                
                const duration = Math.random() * 10 + 5;
                snowflake.style.animationDuration = `${duration}s`;
                snowflake.style.animationDelay = `${Math.random() * 5}s`;
                
                snowContainer.appendChild(snowflake);
            }
        }
        
        // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
        let resources = {
            food: 150,
            wood: 80,
            stone: 45,
            coal: 30,
            gold: 10
        };
        
        function updateResources() {
            document.getElementById('food-count').textContent = resources.food;
            document.getElementById('wood-count').textContent = resources.wood;
            document.getElementById('stone-count').textContent = resources.stone;
            document.getE
